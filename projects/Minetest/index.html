<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<title>Minetest | Home</title>
	<link rel="stylesheet" href="styles.css">
	<link rel="icon" href="Assets/minetest.svg">
	<meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
	<!-- Menu/Top Bar Divider -->
	<div id="TopBar">
		<!-- Icon -->
		<img id="TitleIcon" src="Assets/home_white_48dp.svg" alt="Title Icon">

		<!-- Title -->
		<h id="Title">Home | Minetest</h>

		<!-- Page Buttons -->
		<button class="TopBarButtons" id="AboutButton" onclick="Update('About', this)">About</button>
		<button class="TopBarButtons" id="InstallButton" onclick="Update('Install', this)">Install</button>
		<button class="TopBarButtons" id="HomeButton" onclick="Update('Home', this)">Home</button>
	</div>

	<!-- Content Divider -->
	<div id="Content">
		<h1>Minetest</h1>
		<p>Here is some place holder text. What awesome text this is... Why are you reading this?</p>
		<p>This text is <b>bold</b> and this text is <i>italic</i>.</p>
	</div>

	<!-- Footer -->
	<footer>
		<!-- Icon/Text (author) -->
		<img class="FooterIcon" src="Assets/person_white_48dp.svg" alt="Footer Icon">
		<h class="FooterText">Jacob Humston</h>

		<br><br> <!-- Break (separating author and last edited) -->

		<!-- Icon/Text (last edited) -->
		<img class="FooterIcon BottomFooter" src="Assets/edit_white_48dp.svg" alt="Footer Icon">
		<h class="FooterText BottomFooter">September 14th, 2022</h>
	</footer>

	<!-- Script -->
	<script>
		// Element variables
		const TitelIcon = document.getElementById("TitleIcon")
		const Title = document.getElementById("Title")
		const ContentDivider = document.getElementById("Content")
		const MenuButtons = document.getElementsByClassName("TopBarButtons")

		// Pages
		const Pages = {
			Home: {
				Name: "Home",
				Icon: "home_white_48dp.svg",
				HTML: `
			<h1>Minetest</h1>
			<p>
				Welcome, this is an unofficial site about Minetest!
				<br>
				<br>
				You'll find at the top of this page three buttons you can use...
			</p>
			<ul>
				<li>
					<b>Home</b> - Leads to this page!
				</li>
				<li>
					<b>Install</b> - The installation page, which will explain how to install Minetest. 
				</li>
				<li>	
					<b>About</b> - You'll find all the information about Minetest there. This includes gameplay & more!
				</li>
			</ul>
			`
			},
			About: {
				Name: "About",
				Icon: "description_white_48dp.svg",
				HTML: `
			<div id="PageContent">
				<h1>About</h1>
				<p>Cool page...</p>
			</div>
			<div id="PageList">
				<h2 id="PageListTitle">Pages</h2>
				<button class="PageListButton">Test1</button>
				<br>
				<button class="PageListButton">Test2</button>
			</div>
			`
			},
			Install: {
				Name: "Install",
				Icon: "file_download_white_48dp.svg",
				HTML: `
			<h1>Install</h1>
			<p>...</p>
			`
			}
		}

		// About Pages
		const AboutPages = {
			Page1: {
				Title: "What is Minetest?",
				HTML: `
			<h1>What is Minetest?<h1>
			`
			},
			Page2: {
				Title: "How to play?",
				HTML: `
			<h1>How to play?</h1>
			`
			},
			Page3: {
				Title: "Some Extra Information",
				HTML: `
			<h1>Some Extra Information</h1>
			`
			}
		}

		// Update About Function
		function UpdateAbout(PageKey) {
			const PageList = document.getElementById("PageList")
			const PageContent = document.getElementById("PageContent")
			const ButtonArray = []
			for (const [PageKey, Page] of Object.entries(AboutPages)) {
				ButtonArray.push(`<button class="PageListButton" id="AboutPage_${PageKey}" onclick="UpdateAbout('${PageKey}')">${Page.Title}</button>`)
			}
			PageList.innerHTML = `
		<h2 id="PageListTitle">Pages</h2>
		${ButtonArray.join("<br>")}
		`
			PageContent.innerHTML = AboutPages[PageKey].HTML
			document.getElementById("AboutPage_" + PageKey).style.color = "rgb(193, 193, 193)"
		}

		// Update Function
		function Update(Name, Element) {
			const Page = Pages[Name]
			document.title = `Minetest | ${Page.Name}`
			Title.innerHTML = `${Page.Name} | Minetest`
			TitelIcon.src = `Assets/${Page.Icon}`
			ContentDivider.innerHTML = Page.HTML
			for (let Index = 0; Index < MenuButtons.length; Index++) {
				const CurrentItem = MenuButtons.item(Index)
				CurrentItem.style.color = "rgb(255, 255, 255)"
			}
			Element.style.color = "rgb(193, 193, 193)"
			if (Page.Name === "About") {
				UpdateAbout("Page1")
			}
		}

		// Opening the first page
		Update("Home", MenuButtons.namedItem("HomeButton"))

		// Popup errors for easy debug *hopefully*
		addEventListener("error", Error => {
			alert("Something went wrong:\n\n" + Error.message)
		})
	</script>
</body>

</html>